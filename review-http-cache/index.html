<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="theme-color" content="#597ef7"><meta name="author" content="ä¸æ¢"><meta name="copyright" content="ä¸æ¢"><meta name="generator" content="Hexo 6.3.0"><meta name="theme" content="hexo-theme-yun"><title>é‡æ¸© HTTP ç¼“å­˜ | ä¸æ¢çš„å°çª</title><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@900&amp;display=swap" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/star-markdown-css@0.2.4/dist/yun/yun-markdown.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prism-theme-vars/base.css"><script src="//at.alicdn.com/t/font_1140697_dxory92pb0h.js" async></script><script src="https://cdn.jsdelivr.net/npm/scrollreveal/dist/scrollreveal.min.js" defer></script><script>function initScrollReveal() {
  [".post-card",".markdown-body img"].forEach((target)=> {
    ScrollReveal().reveal(target);
  })
}
document.addEventListener("DOMContentLoaded", initScrollReveal);
document.addEventListener("pjax:success", initScrollReveal);
</script><link class="aplayer-style-marker" rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script class="aplayer-script-marker" src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" defer></script><script class="meting-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/pjax@latest/pjax.min.js" defer></script><script src="/js/pjax.js" defer type="module"></script><script src="https://cdn.jsdelivr.net/npm/vue@2.6.14"></script><link rel="icon" type="image/png" href="https://bigdreamerblog.oss-cn-beijing.aliyuncs.com/dev-blog/favicon.png"><link rel="mask-icon" href="https://bigdreamerblog.oss-cn-beijing.aliyuncs.com/dev-blog/favicon.png" color="#597ef7"><link rel="preload" href="/css/hexo-theme-yun.css" as="style"><link rel="prefetch" href="/js/sidebar.js" as="script"><link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin><link rel="preconnect" href="https://cdn.jsdelivr.net/npm/" crossorigin><script id="yun-config">
    window.Yun = {}
    window.CONFIG = {"hostname":"dev.bigdreamer.cc","root":"/","title":"ä¸æ¢çš„å°çª","version":"1.10.11","mode":"auto","copycode":true,"page":{"isPost":true},"i18n":{"placeholder":"æœç´¢...","empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹: ${query}","hits":"æ‰¾åˆ° ${hits} æ¡ç»“æœ","hits_time":"æ‰¾åˆ° ${hits} æ¡ç»“æœï¼ˆç”¨æ—¶ ${time} æ¯«ç§’ï¼‰"},"anonymous_image":"https://cdn.jsdelivr.net/gh/YunYouJun/cdn/img/avatar/none.jpg","say":{"api":"https://v1.hitokoto.cn","hitokoto":true},"local_search":{"path":"/search.xml"},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"fireworks":{"colors":null},"waline":{"config":{"enable":true,"serverURL":"https://waline.bigdreamer.cc","comment":true,"visitor":true,"avatar":"https://bigdreamerblog.oss-cn-beijing.aliyuncs.com/dev-blog/static/16393598091743192.jpeg?x-oss-process=style/HANDLE_IMAGE","el":"#waline","lang":"zh-CN"},"cdn":"https://cdn.jsdelivr.net/npm/@waline/client@v2/dist/waline.js","dark":"html.dark"},"vendors":{"host":"https://cdn.jsdelivr.net/npm/","darken":"https://cdn.jsdelivr.net/npm/darken@1.5.0"}};
  </script><link rel="stylesheet" href="/css/hexo-theme-yun.css"><script src="/js/hexo-theme-yun.js" type="module"></script><link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons"><meta name="description" content="(: å› ä¸ºä¸€æ‰‹æ–‡ç« åœ¨æ˜é‡‘ï¼Œåªæ¢äº† gif ï¼Œå‰©ä¸‹çš„åŸå›¾æœ‰æ°´å°ï¼Œæ‡’å¾—æ¢äº†ï¼Œgif æœ‰äº›æ¨¡ç³Šï¼Œè‡ªè¡Œè„‘è¡¥ã€‚  è“¦ç„¶å›é¦–ï¼Œé‚£â€œç¼“å­˜â€å´åœ¨ç¯ç«é˜‘çŠå¤„ï½ Situationï¼ˆæƒ…æ™¯ï¼‰ä½œä¸ºæ—¥å¸¸çš„çŸ¥è¯†å¤ä¹ ï¼Œé‡æ¸©ä¸€ä¸‹æµè§ˆå™¨ç¼“å­˜ã€‚ çŸ¥è¯†ä¸æ­¢äºçœ¼å‰çš„æ–‡å­—ï¼Œæ›´åœ¨å½“ä¸‹çš„å®æ“ã€‚ Taskï¼ˆä»»åŠ¡ï¼‰ é€šè¿‡æŸ¥é˜…æƒå¨èµ„æ–™æ•´ç†å…³é”®çŸ¥è¯†ç‚¹ é€šè¿‡å®æ“ï¼Œé‡æ¸©ç¼“å­˜åœºæ™¯">
<meta property="og:type" content="article">
<meta property="og:title" content="é‡æ¸© HTTP ç¼“å­˜">
<meta property="og:url" content="https://dev.bigdreamer.cc/review-http-cache/index.html">
<meta property="og:site_name" content="ä¸æ¢çš„å°çª">
<meta property="og:description" content="(: å› ä¸ºä¸€æ‰‹æ–‡ç« åœ¨æ˜é‡‘ï¼Œåªæ¢äº† gif ï¼Œå‰©ä¸‹çš„åŸå›¾æœ‰æ°´å°ï¼Œæ‡’å¾—æ¢äº†ï¼Œgif æœ‰äº›æ¨¡ç³Šï¼Œè‡ªè¡Œè„‘è¡¥ã€‚  è“¦ç„¶å›é¦–ï¼Œé‚£â€œç¼“å­˜â€å´åœ¨ç¯ç«é˜‘çŠå¤„ï½ Situationï¼ˆæƒ…æ™¯ï¼‰ä½œä¸ºæ—¥å¸¸çš„çŸ¥è¯†å¤ä¹ ï¼Œé‡æ¸©ä¸€ä¸‹æµè§ˆå™¨ç¼“å­˜ã€‚ çŸ¥è¯†ä¸æ­¢äºçœ¼å‰çš„æ–‡å­—ï¼Œæ›´åœ¨å½“ä¸‹çš„å®æ“ã€‚ Taskï¼ˆä»»åŠ¡ï¼‰ é€šè¿‡æŸ¥é˜…æƒå¨èµ„æ–™æ•´ç†å…³é”®çŸ¥è¯†ç‚¹ é€šè¿‡å®æ“ï¼Œé‡æ¸©ç¼“å­˜åœºæ™¯">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://to-out-use.oss-cn-hangzhou.aliyuncs.com/common/Kapture%202022-08-19%20at%2012.46.04.gif">
<meta property="og:image" content="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1c55b3a25bf948359e693274c3fcc440~tplv-k3u1fbpfcp-watermark.image">
<meta property="og:image" content="https://to-out-use.oss-cn-hangzhou.aliyuncs.com/common/Kapture%202022-08-19%20at%2013.01.30.gif">
<meta property="og:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9579dbedc0544b619aaf06d5d22760d0~tplv-k3u1fbpfcp-watermark.image">
<meta property="og:image" content="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/71722c5873fc419f8f771a5347936cfb~tplv-k3u1fbpfcp-watermark.image">
<meta property="og:image" content="https://to-out-use.oss-cn-hangzhou.aliyuncs.com/common/Kapture%202022-08-19%20at%2020.48.32.gif">
<meta property="og:image" content="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6dfc4a3d0b7c4012b44da7975ff69468~tplv-k3u1fbpfcp-watermark.image">
<meta property="og:image" content="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ceda93029f9140a9b3519ad6cf8ef53c~tplv-k3u1fbpfcp-watermark.image">
<meta property="og:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1ba7298219994c6e887c70f5453127b6~tplv-k3u1fbpfcp-watermark.image">
<meta property="og:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0bc7a964ea93455b9e313fbdd27fa6f9~tplv-k3u1fbpfcp-watermark.image">
<meta property="og:image" content="https://to-out-use.oss-cn-hangzhou.aliyuncs.com/common/Kapture%202022-08-19%20at%2020.55.52.gif">
<meta property="og:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ec042328f299435abafd1a2ca0d163bf~tplv-k3u1fbpfcp-watermark.image">
<meta property="og:image" content="https://to-out-use.oss-cn-hangzhou.aliyuncs.com/common/Kapture%202022-08-19%20at%2021.17.10.gif">
<meta property="og:image" content="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/94243716906e447e939142cbce763572~tplv-k3u1fbpfcp-watermark.image">
<meta property="article:published_time" content="2022-08-19T22:00:00.000Z">
<meta property="article:modified_time" content="2023-11-28T04:40:43.602Z">
<meta property="article:author" content="ä¸æ¢">
<meta property="article:tag" content="HTTP">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://to-out-use.oss-cn-hangzhou.aliyuncs.com/common/Kapture%202022-08-19%20at%2012.46.04.gif"><script>(function() {
  if (CONFIG.mode !== 'auto') return
  const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches
  const setting = localStorage.getItem('darken-mode') || 'auto'
  if (setting === 'dark' || (prefersDark && setting !== 'light'))
    document.documentElement.classList.toggle('dark', true)
})()</script></head><body><script src="https://code.iconify.design/2/2.1.1/iconify.min.js"></script><script>// Define global variable
IconifyProviders = {
  // Empty prefix: overwrite default API provider configuration
  '': {
    // Use custom API first, use Iconify public API as backup
    resources: [
        'https://api.iconify.design',
    ],
    // Wait for 1 second before switching API hosts
    rotate: 1000,
  },
};</script><script defer src="https://cdn.jsdelivr.net/npm/animejs@latest"></script><script defer src="/js/ui/fireworks.js" type="module"></script><canvas class="fireworks"></canvas><div class="container"><a class="sidebar-toggle hty-icon-button" id="menu-btn"><div class="hamburger hamburger--spin" type="button"><span class="hamburger-box"><span class="hamburger-inner"></span></span></div></a><div class="sidebar-toggle sidebar-overlay"></div><aside class="sidebar"><script src="/js/sidebar.js" type="module"></script><ul class="sidebar-nav"><li class="sidebar-nav-item sidebar-nav-toc hty-icon-button sidebar-nav-active" data-target="post-toc-wrap" title="æ–‡ç« ç›®å½•"><span class="icon iconify" data-icon="ri:list-ordered"></span></li><li class="sidebar-nav-item sidebar-nav-overview hty-icon-button" data-target="site-overview-wrap" title="ç«™ç‚¹æ¦‚è§ˆ"><span class="icon iconify" data-icon="ri:passport-line"></span></li></ul><div class="sidebar-panel" id="site-overview-wrap"><div class="site-info fix-top"><a class="site-author-avatar" href="/about/" title="ä¸æ¢"><img width="96" loading="lazy" src="https://bigdreamerblog.oss-cn-beijing.aliyuncs.com/dev-blog/static/16393598091743192.jpeg?x-oss-process=style/HANDLE_IMAGE" alt="ä¸æ¢"><span class="site-author-status" title="å¿ƒè‹¥å‘é˜³ï¼Œæ— æƒ§æ‚²ä¼¤">ğŸ¯</span></a><div class="site-author-name"><a href="/about/">ä¸æ¢</a></div><a class="site-name" href="/about/site.html">ä¸æ¢çš„å°çª</a><sub class="site-subtitle"></sub><div class="site-description"></div></div><nav class="site-state"><a class="site-state-item hty-icon-button icon-home" href="/" title="é¦–é¡µ"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-home-4-line"></use></svg></span></a><div class="site-state-item"><a href="/archives/" title="å½’æ¡£"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-archive-line"></use></svg></span><span class="site-state-item-count">11</span></a></div><div class="site-state-item"><a href="/categories/" title="åˆ†ç±»"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-folder-2-line"></use></svg></span><span class="site-state-item-count">4</span></a></div><div class="site-state-item"><a href="/tags/" title="æ ‡ç­¾"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="site-state-item-count">9</span></a></div><a class="site-state-item hty-icon-button" target="_blank" rel="noopener" href="https://www.bigdreamer.cc" title="Home"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:rocket-2-line"></span></span></a></nav><hr style="margin-bottom:0.5rem"><div class="links-of-author"><a class="links-of-author-item hty-icon-button" rel="noopener" href="http://wpa.qq.com/msgrd?v=3&amp;uin=1826001146&amp;site=qq&amp;menu=yes" title="QQ 1826001146" target="_blank" style="color:#12B7F5"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-qq-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://github.com/bigbigDreamer" title="GitHub" target="_blank" style="color:#6e5494"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-github-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="mailto:jadeface.scholar@gmail.com" title="E-Mail" target="_blank" style="color:#8E71C1"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-mail-line"></use></svg></a></div><hr style="margin:0.5rem 1rem"><div class="links"><a class="links-item hty-icon-button" href="/links/" title="æˆ‘çš„å°ä¼™ä¼´ä»¬" style="color:dodgerblue"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-genderless-line"></use></svg></a><a class="links-item hty-icon-button" href="/copyright/" title="ç‰ˆæƒï¼ˆå…è´£ï¼‰å£°æ˜" style="color:null"><span class="icon iconify" data-icon="ri:copyright-line"></span></a><a class="links-item hty-icon-button" href="/todolist/" title="Todo List" style="color:null"><span class="icon iconify" data-icon="ri:calendar-todo-line"></span></a><a class="links-item hty-icon-button" target="_blank" rel="noopener" href="https://whoami.bigdreamer.cc" title="å…³äºæˆ‘çš„é‡Œç¨‹ç¢‘" style="color:null"><span class="icon iconify" data-icon="ri:mickey-line"></span></a></div><br><a class="links-item hty-icon-button" id="toggle-mode-btn" href="javascript:;" title="Mode" style="color: #f1cb64"><span class="icon iconify" data-icon="ri:contrast-2-line"></span></a></div><div class="sidebar-panel sidebar-panel-active" id="post-toc-wrap"><div class="post-toc"><div class="post-toc-content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#Situation%EF%BC%88%E6%83%85%E6%99%AF%EF%BC%89"><span class="toc-number">1.</span> <span class="toc-text">Situationï¼ˆæƒ…æ™¯ï¼‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Task%EF%BC%88%E4%BB%BB%E5%8A%A1%EF%BC%89"><span class="toc-number">2.</span> <span class="toc-text">Taskï¼ˆä»»åŠ¡ï¼‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Action%EF%BC%88%E5%8A%A8%E4%BD%9C%EF%BC%89"><span class="toc-number">3.</span> <span class="toc-text">Actionï¼ˆåŠ¨ä½œï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#HTTP-%E7%BC%93%E5%AD%98%E7%AD%96%E7%95%A5%EF%BC%9A"><span class="toc-number">3.1.</span> <span class="toc-text">HTTP ç¼“å­˜ç­–ç•¥ï¼š</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Result%EF%BC%88%E7%BB%93%E8%AE%BA%EF%BC%89"><span class="toc-number">4.</span> <span class="toc-text">Resultï¼ˆç»“è®ºï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#HTTP-%E7%BC%93%E5%AD%98%E4%BD%93%E7%B3%BB"><span class="toc-number">4.1.</span> <span class="toc-text">HTTP ç¼“å­˜ä½“ç³»</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"><span class="toc-number">4.2.</span> <span class="toc-text">å‚è€ƒèµ„æ–™</span></a></li></ol></li></ol></div></div></div><div class="tag-cloud"><div class="tag-cloud-tags"><a href="/tags/Antd/" style="font-size: 12px; color: #999">Antd</a> <a href="/tags/HTTP/" style="font-size: 12px; color: #999">HTTP</a> <a href="/tags/React/" style="font-size: 30px; color: #0078e7">React</a> <a href="/tags/%E5%BC%95%E5%AD%90/" style="font-size: 12px; color: #999">å¼•å­</a> <a href="/tags/%E6%80%9D%E8%80%83/" style="font-size: 12px; color: #999">æ€è€ƒ</a> <a href="/tags/%E6%84%9F%E6%82%9F/" style="font-size: 12px; color: #999">æ„Ÿæ‚Ÿ</a> <a href="/tags/%E6%A8%A1%E5%9D%97%E5%8C%96/" style="font-size: 12px; color: #999">æ¨¡å—åŒ–</a> <a href="/tags/%E7%BB%84%E4%BB%B6%E5%BA%93/" style="font-size: 12px; color: #999">ç»„ä»¶åº“</a> <a href="/tags/%E9%9A%8F%E6%83%B3/" style="font-size: 12px; color: #999">éšæƒ³</a></div></div></aside><main class="sidebar-translate" id="content"><div id="post"><article class="hty-card post-block" itemscope itemtype="https://schema.org/Article" style="--smc-primary:#597ef7;"><link itemprop="mainEntityOfPage" href="https://dev.bigdreamer.cc/review-http-cache/"><span hidden itemprop="author" itemscope itemtype="https://schema.org/Person"><meta itemprop="name" content="ä¸æ¢"><meta itemprop="description"></span><span hidden itemprop="publisher" itemscope itemtype="https://schema.org/Organization"><meta itemprop="name" content="ä¸æ¢çš„å°çª"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">é‡æ¸© HTTP ç¼“å­˜</h1><div class="post-meta"><div class="post-time" style="display:block"><span class="post-meta-item-icon"><span class="icon iconify" data-icon="ri:calendar-line"></span></span> <time title="åˆ›å»ºæ—¶é—´ï¼š2022-08-19 22:00:00" itemprop="dateCreated datePublished" datetime="2022-08-19T22:00:00+00:00">2022-08-19</time><span class="post-meta-divider">-</span><span class="post-meta-item-icon"><span class="icon iconify" data-icon="ri:calendar-2-line"></span></span> <time title="ä¿®æ”¹æ—¶é—´ï¼š2023-11-28 04:40:43" itemprop="dateModified" datetime="2023-11-28T04:40:43+00:00">2023-11-28</time></div><span class="post-count"><span class="post-symbolcount"><span class="post-meta-item-icon" title="æœ¬æ–‡å­—æ•°"><span class="icon iconify" data-icon="ri:file-word-line"></span></span> <span title="æœ¬æ–‡å­—æ•°">2.7k</span><span class="post-meta-divider">-</span><span class="post-meta-item-icon" title="é˜…è¯»æ—¶é•¿"><span class="icon iconify" data-icon="ri:timer-line"></span></span> <span title="é˜…è¯»æ—¶é•¿">10m</span></span></span><span class="leancloud_visitors" id="/review-http-cache/" data-flag-title="é‡æ¸© HTTP ç¼“å­˜"><span class="post-meta-divider">-</span><span class="post-meta-item-icon" title="é˜…è¯»æ¬¡æ•°"><span class="icon iconify" data-icon="ri:eye-line"></span> <span class="leancloud-visitors-count"></span></span></span><span class="post-meta-divider">-</span><a href="#comment"><span class="post-meta-item-icon" title="è¯„è®ºæ•°"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-chat-3-line"></use></svg> <span class="waline-comment-count" id="/review-http-cache/"></span></span></a><div class="post-classify"><span class="post-category"> <span class="post-meta-item-icon" style="margin-right:3px;"><span class="icon iconify" data-icon="ri:folder-line"></span></span><span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a class="category-item" href="/categories/%E7%AC%94%E8%AE%B0/" style="--text-color:dimgray" itemprop="url" rel="index"><span itemprop="text">ç¬”è®°</span></a></span></span><span class="post-tag"><span class="post-meta-divider">-</span><a class="tag-item" href="/tags/HTTP/" style="--text-color:var(--hty-text-color)"><span class="post-meta-item-icon"><span class="icon iconify" data-icon="ri:price-tag-3-line"></span></span><span class="tag-name">HTTP</span></a></span></div><div class="post-author"><div class="author-avatar"><img src="https://www.gravatar.com/avatar/d9d40be51d2c2fd33952133c66b698d8?s=20&amp;d=https%3A%2F%2Fcdn.jsdelivr.net%2Fgh%2FYunYouJun%2Fcdn%2Fimg%2Favatar%2Fnone.jpg"></div><span class="author-name">ä¸æ¢</span></div></div></header><section class="post-body" itemprop="articleBody"><div class="post-content markdown-body"><blockquote>
<p>(: å› ä¸ºä¸€æ‰‹æ–‡ç« åœ¨æ˜é‡‘ï¼Œåªæ¢äº† <code>gif</code> ï¼Œå‰©ä¸‹çš„åŸå›¾æœ‰æ°´å°ï¼Œæ‡’å¾—æ¢äº†ï¼Œgif æœ‰äº›æ¨¡ç³Šï¼Œè‡ªè¡Œè„‘è¡¥ã€‚</p>
</blockquote>
<p>è“¦ç„¶å›é¦–ï¼Œé‚£â€œç¼“å­˜â€å´åœ¨ç¯ç«é˜‘çŠå¤„ï½</p>
<h3 id="Situationï¼ˆæƒ…æ™¯ï¼‰"><a href="#Situationï¼ˆæƒ…æ™¯ï¼‰" class="headerlink" title="Situationï¼ˆæƒ…æ™¯ï¼‰"></a>Situationï¼ˆæƒ…æ™¯ï¼‰</h3><p>ä½œä¸ºæ—¥å¸¸çš„çŸ¥è¯†å¤ä¹ ï¼Œé‡æ¸©ä¸€ä¸‹æµè§ˆå™¨ç¼“å­˜ã€‚</p>
<p>çŸ¥è¯†ä¸æ­¢äºçœ¼å‰çš„æ–‡å­—ï¼Œæ›´åœ¨å½“ä¸‹çš„å®æ“ã€‚</p>
<h3 id="Taskï¼ˆä»»åŠ¡ï¼‰"><a href="#Taskï¼ˆä»»åŠ¡ï¼‰" class="headerlink" title="Taskï¼ˆä»»åŠ¡ï¼‰"></a>Taskï¼ˆä»»åŠ¡ï¼‰</h3><ul>
<li>é€šè¿‡æŸ¥é˜…æƒå¨èµ„æ–™æ•´ç†å…³é”®çŸ¥è¯†ç‚¹</li>
<li>é€šè¿‡å®æ“ï¼Œé‡æ¸©ç¼“å­˜åœºæ™¯</li>
</ul>
<span id="more"></span>

<h3 id="Actionï¼ˆåŠ¨ä½œï¼‰"><a href="#Actionï¼ˆåŠ¨ä½œï¼‰" class="headerlink" title="Actionï¼ˆåŠ¨ä½œï¼‰"></a>Actionï¼ˆåŠ¨ä½œï¼‰</h3><p>æˆ‘ä»¬å¯ä»¥å…ˆæ¥èŠä¸€ä¸ªæ¦‚å¿µï¼Œå°±æ˜¯ä¸€ä¸ªä¸œè¥¿çš„å‡ºç°å¿…ç„¶æ˜¯æœ‰æ„ä¹‰çš„ã€‚ä¸ºä»€ä¹ˆè¦ç¼“å­˜ï¼Ÿ</p>
<blockquote>
<p>ç®€å•è®²ï¼ŒèŠ‚çœä¸å¿…è¦çš„æµé‡å¼€æ”¯ï¼Œæå‡å®¢æˆ·ç«¯è®¿é—®é€Ÿåº¦ã€‚</p>
</blockquote>
<p>æ›´å®è§‚æ„ä¹‰ä¸Šæ¥è®²ï¼š</p>
<blockquote>
<p>è´è¶æ•ˆåº”ï¼šå¤§é‡ç½‘ç»œè¯·æ±‚ä¼šæ¶ˆè€—èµ„æºï¼Œäº§ç”Ÿçƒ­é‡ï¼Œå¯¼è‡´å…¨çƒå˜æš–ã€‚</p>
</blockquote>
<p>ä¸¾ä¸ªä¾‹å­ï¼šå½“ <code>Client</code> æ¯æ¬¡å‘ <code>Server</code> è¯·æ±‚èµ„æºï¼Œç›¸åŒçš„èµ„æºåªæœ‰é¦–æ¬¡åŠ è½½ä¼šè€—è´¹æµé‡ï¼Œåé¢ç»Ÿä¸€ä»æœ¬åœ°ç¼“å­˜ä¸­æ‹¿ã€‚</p>
<hr>
<p>å¼€å§‹ä¹‹å‰å…ˆä»‹ç»ä¸€ä¸ªæ¦‚å¿µï¼š<strong>æ–°é²œåº¦ï¼ˆFreshnessï¼‰</strong></p>
<p>æ‘˜å½•è‡ªï¼š<a target="_blank" rel="noopener" href="https://httpwg.org/specs/rfc7234.html#expiration.model">HTTP è§„èŒƒ</a></p>
<blockquote>
<p>AÂ freshÂ response is one whose age has not yet exceeded its freshness lifetime. Conversely, aÂ staleÂ response is one where it has.</p>
<p>æ–°é²œå“åº”æ˜¯æŒ‡å…¶å¹´é¾„å°šæœªè¶…è¿‡å…¶æ–°é²œæœŸçš„å“åº”ã€‚åä¹‹ï¼Œé™ˆæ—§çš„å“åº”æ˜¯æŒ‡å®ƒå·²ç»è¶…è¿‡äº†ã€‚</p>
</blockquote>
<blockquote>
<p>A responseâ€™sÂ freshness lifetimeÂ is the length of time between its generation by the origin server and its expiration time. AnÂ explicit expiration timeÂ is the time at which the origin server intends that a stored response can no longer be used by a cache without further validation, whereas aÂ heuristic expiration timeÂ is assigned by a cache when no explicit expiration time is available.</p>
<p>å“åº”çš„ä¿é²œæœŸæ˜¯æŒ‡ä»æºæœåŠ¡å™¨ç”Ÿæˆåˆ°è¿‡æœŸæ—¶é—´ä¹‹é—´çš„æ—¶é—´é•¿åº¦ã€‚æ˜ç¡®çš„è¿‡æœŸæ—¶é—´æ˜¯æŒ‡æºæœåŠ¡å™¨æ‰“ç®—è®©ç¼“å­˜åœ¨æ²¡æœ‰è¿›ä¸€æ­¥éªŒè¯çš„æƒ…å†µä¸‹ä¸å†ä½¿ç”¨å­˜å‚¨çš„å“åº”çš„æ—¶é—´ï¼Œè€Œå¯å‘å¼è¿‡æœŸæ—¶é—´æ˜¯ç”±ç¼“å­˜åœ¨æ²¡æœ‰æ˜ç¡®è¿‡æœŸæ—¶é—´çš„æƒ…å†µä¸‹æŒ‡å®šçš„ã€‚</p>
</blockquote>
<p><strong>ç¡®å®šæ–°é²œåº¦çš„ä¸»è¦æœºåˆ¶æ˜¯æºæœåŠ¡å™¨ä½¿ç”¨<a target="_blank" rel="noopener" href="https://httpwg.org/specs/rfc7234.html#header.expires">Expires</a>æ ‡å¤´å­—æ®µï¼ˆ<a target="_blank" rel="noopener" href="https://httpwg.org/specs/rfc7234.html#header.expires" title="è¿‡æœŸ">ç¬¬ 5.3 èŠ‚</a>ï¼‰æˆ– max-age å“åº”æŒ‡ä»¤ï¼ˆ<a target="_blank" rel="noopener" href="https://httpwg.org/specs/rfc7234.html#cache-response-directive.max-age" title="æœ€å¤§å¹´é¾„">ç¬¬ 5.2.2.8 èŠ‚</a>ï¼‰æä¾›æœªæ¥çš„æ˜ç¡®åˆ°æœŸæ—¶é—´ã€‚</strong></p>
<p>å…¬å¼ï¼š<code>response_is_fresh = (freshness_lifetime &gt; current_age)</code></p>
<ul>
<li><p><code>freshness_lifetime</code></p>
<ul>
<li>å¦‚æœç¼“å­˜æ˜¯å…±äº«çš„å¹¶ä¸”å­˜åœ¨ s-maxage å“åº”æŒ‡ä»¤ï¼ˆ<a target="_blank" rel="noopener" href="https://httpwg.org/specs/rfc7234.html#cache-response-directive.s-maxage" title="s-maxage">ç¬¬ 5.2.2.9 èŠ‚</a>ï¼‰ï¼Œåˆ™ä½¿ç”¨å®ƒçš„å€¼ï¼Œæˆ–è€…</li>
<li>å¦‚æœå­˜åœ¨ max-age å“åº”æŒ‡ä»¤ï¼ˆ<a target="_blank" rel="noopener" href="https://httpwg.org/specs/rfc7234.html#cache-response-directive.max-age" title="æœ€å¤§å¹´é¾„">ç¬¬ 5.2.2.8 èŠ‚</a>ï¼‰ï¼Œè¯·ä½¿ç”¨å®ƒçš„å€¼ï¼Œæˆ–è€…</li>
<li>å¦‚æœå­˜åœ¨<a target="_blank" rel="noopener" href="https://httpwg.org/specs/rfc7234.html#header.expires">Expires</a>å“åº”å¤´å­—æ®µï¼ˆ<a target="_blank" rel="noopener" href="https://httpwg.org/specs/rfc7234.html#header.expires" title="è¿‡æœŸ">ç¬¬ 5.3 èŠ‚</a>ï¼‰ï¼Œåˆ™ä½¿ç”¨å…¶å€¼å‡å»<a target="_blank" rel="noopener" href="https://httpwg.org/specs/rfc7231.html#header.date">Date</a>å“åº”å¤´å­—æ®µçš„å€¼ï¼Œæˆ–è€…</li>
<li>å¦åˆ™ï¼Œå“åº”ä¸­ä¸å­˜åœ¨æ˜ç¡®çš„åˆ°æœŸæ—¶é—´ã€‚å¯å‘å¼çš„æ–°é²œåº¦ç”Ÿå‘½å‘¨æœŸå¯èƒ½é€‚ç”¨ï¼›è¯·å‚é˜…<a target="_blank" rel="noopener" href="https://httpwg.org/specs/rfc7234.html#heuristic.freshness" title="è®¡ç®—å¯å‘å¼æ–°é²œåº¦">ç¬¬ 4.2.2 èŠ‚</a>ã€‚</li>
</ul>
</li>
<li><p><code>current_age</code></p>
<ul>
<li>ç”±äºè§„èŒƒå†…å®¹è¿‡å¤šï¼Œå¹¶éæœ¬æ–‡çš„é‡ç‚¹ï¼Œè¿™é‡Œä¸å†åšèµ˜è¿°ï¼Œè¯¦ç»†å¯æŸ¥çœ‹ï¼š<a target="_blank" rel="noopener" href="https://httpwg.org/specs/rfc7234.html#age.calculations">ä¼ é€é—¨</a></li>
</ul>
</li>
</ul>
<p>æ€»ç»“ä¸€å¥è¯ï¼šé€šè¿‡ <code>Cache-Control</code> å’Œ <code>Expires</code> ï¼ŒåŸå§‹æœåŠ¡å™¨å¯ä»¥å¯¹èµ„æºå®šä¹‰å…¶ä¿è´¨æœŸã€‚åœ¨ä¿è´¨æœŸä¹‹å†…ï¼Œç¼“å­˜å°±è®¤ä¸ºè¯¥èµ„æºæ˜¯æ–°é²œçš„ï¼Œå¯ä»¥ç›´æ¥ä¼ å›ç»™å®¢æˆ·ç«¯ï¼Œå¦‚æœè¿‡æœŸé‚£ä¹ˆå°±éœ€è¦è¿›è¡Œå†éªŒè¯ã€‚</p>
<h4 id="HTTP-ç¼“å­˜ç­–ç•¥ï¼š"><a href="#HTTP-ç¼“å­˜ç­–ç•¥ï¼š" class="headerlink" title="HTTP ç¼“å­˜ç­–ç•¥ï¼š"></a>HTTP ç¼“å­˜ç­–ç•¥ï¼š</h4><ul>
<li>å¼ºç¼“å­˜ï¼ˆ<code>Response Header</code> ä¸­çš„ <code>Expries</code> å’Œ <code>Cache-Control</code> å¤´ï¼‰</li>
<li>åå•†ç¼“å­˜ï¼ˆ<code>Res &amp; Req Header</code> ä¸­çš„  <code>Last-Modify/If-Modify-Since</code> å’Œ <code>Etag/If-None-Match</code>ï¼‰</li>
</ul>
<p>ä¸‹é¢å±•å¼€è®²ä¸€è®²</p>
<p><strong>Expries</strong>ï¼ˆ<a target="_blank" rel="noopener" href="https://www.rfc-editor.org/rfc/rfc822#section-5.1">éœ€è¦å›ºå®šæ ¼å¼çš„ç»å¯¹æ—¥æœŸ</a>ï¼‰</p>
<p>è¡¨ç¤ºç¼“å­˜è¿‡æœŸçš„æ—¶é—´ï¼Œç›¸å¯¹äºä¸»æœºè€Œè¨€çš„ç»å¯¹æ—¶é—´ã€‚</p>
<p>å…ˆç®€å•ç”¨ <code>nest</code> éšä¾¿æ­å»ºä¸ªé™æ€èµ„æºæœåŠ¡å™¨ï¼Œå¹¶è®¾ç½® <code>Expires</code> å¤´ï¼š</p>
<pre class="language-typescript" data-language="typescript"><code class="language-typescript">app<span class="token punctuation">.</span><span class="token function">useStaticAssets</span><span class="token punctuation">(</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'..'</span><span class="token punctuation">,</span> <span class="token string">'public'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>
  <span class="token function-variable function">setHeaders</span><span class="token operator">:</span> <span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
    res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span>
      <span class="token string">'Expires'</span><span class="token punctuation">,</span>
      <span class="token function">dayjs</span><span class="token punctuation">(</span><span class="token string">'2022-08-19 13:00:15'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">,</span> <span class="token string">'seconds'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
    res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Cache-Control'</span><span class="token punctuation">,</span> <span class="token string">'private'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Date'</span><span class="token punctuation">,</span> <span class="token function">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  lastModified<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  etag<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>

<p>æ¥ä¸ªåŠ¨ç”»</p>
<p><img src="https://to-out-use.oss-cn-hangzhou.aliyuncs.com/common/Kapture%202022-08-19%20at%2012.46.04.gif" alt="Kapture 2022-08-19 at 12.46.04.gif" loading="lazy"></p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1c55b3a25bf948359e693274c3fcc440~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy"></p>
<p>é¦–æ¬¡è¯·æ±‚æ—¶ï¼Œæµè§ˆå™¨è¿›è¡Œäº†æ•°æ®ç¼“å­˜ï¼Œå†æ¬¡è¯·æ±‚å°±ä¸å†å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œè€Œæ˜¯ç›´æ¥ä» <code>disk cache</code> ä¸­æ‹¿äº†ã€‚</p>
<p><strong>Cache-Control</strong></p>
<p>ä¸‹é¢æ˜¯å¤´å¯é€‰çš„å‡ ä¸ªå€¼ï¼š</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">Cache-Control: no-store, no-cache, max-age<span class="token operator">=</span><span class="token number">0</span>, must-revalidate, proxy-revalidate</code></pre>

<p>å…ˆåœ¨é™æ€èµ„æºæœåŠ¡å™¨çš„ <code>Response</code> ä¸Šå¡ä¸ª <code>Cache-Control</code> å¤´ï¼š</p>
<pre class="language-typescript" data-language="typescript"><code class="language-typescript">app<span class="token punctuation">.</span><span class="token function">useStaticAssets</span><span class="token punctuation">(</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'..'</span><span class="token punctuation">,</span> <span class="token string">'public'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>
  <span class="token function-variable function">setHeaders</span><span class="token operator">:</span> <span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// res.setHeader(</span>
    <span class="token comment">//   'Expires',</span>
    <span class="token comment">//   dayjs('2022-08-19 13:00:15').add(15, 'seconds').toDate(),</span>
    <span class="token comment">// );</span>
    res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Cache-Control'</span><span class="token punctuation">,</span> <span class="token string">'max-age=3000'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Date'</span><span class="token punctuation">,</span> <span class="token function">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  lastModified<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  etag<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>

<p>ä¾æ—§å†çœ‹åŠ¨ç”»ï¼š</p>
<p><img src="https://to-out-use.oss-cn-hangzhou.aliyuncs.com/common/Kapture%202022-08-19%20at%2013.01.30.gif" alt="Kapture 2022-08-19 at 13.01.30.gif" loading="lazy"></p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9579dbedc0544b619aaf06d5d22760d0~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy"></p>
<p><code>max-age=3000</code> çš„æ„æ€å°±æ˜¯ <code>3000</code> ç§’åè¿‡æœŸã€‚è¿™ä¸ª <code>3000</code> ç§’æ˜¯ç›¸å¯¹äº <code>Response</code> çš„ <code>Date</code> å¤´è€Œè¨€çš„ã€‚</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/71722c5873fc419f8f771a5347936cfb~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy"></p>
<p>ä¸ºäº†è¯´æ˜æ ¹æœ¬æœºæ—¶é—´æ˜¯æ— å…³çš„ï¼Œæˆ‘æˆªå›¾äº†æœ€æ–°ä¸€æ¬¡è¯·æ±‚å’Œæˆ‘æœ¬æœºæ—¶é—´çš„æˆªå›¾æ‹¼æ¥ã€‚</p>
<p>é‚£ä¹ˆå¦‚æœä¸¤ä¸ªå¤´éƒ½å­˜åœ¨å‘¢ï¼Ÿä¼šåšä½•ç§å†³ç­–ï¼Ÿå®è·µçš„ç»“æœå¯èƒ½å¹¶ä¸èƒ½è¯´æœæˆ‘ä»¬ï¼Œä¸€æ ·çš„æ€è·¯ï¼Œå…ˆç¿»è§„èŒƒï¼Œåå®è·µè¯å®ã€‚</p>
<blockquote>
<p>If a response includes aÂ <a target="_blank" rel="noopener" href="https://httpwg.org/specs/rfc7234.html#header.cache-control">Cache-Control</a>Â field with the max-age directive (<a target="_blank" rel="noopener" href="https://httpwg.org/specs/rfc7234.html#cache-response-directive.max-age" title="max-age">Section 5.2.2.8</a>), a recipientÂ <em>MUST</em>Â ignore the Expires field. Likewise, if a response includes the s-maxage directive (<a target="_blank" rel="noopener" href="https://httpwg.org/specs/rfc7234.html#cache-response-directive.s-maxage" title="s-maxage">Section 5.2.2.9</a>), a shared cache recipientÂ <em>MUST</em>Â ignore the Expires field. In both these cases, the value in Expires is only intended for recipients that have not yet implemented the Cache-Control field.</p>
</blockquote>
<blockquote>
<p>å¦‚æœä¸€ä¸ªå“åº”åŒ…æ‹¬ä¸€ä¸ªå¸¦æœ‰max-ageæŒ‡ä»¤çš„<a target="_blank" rel="noopener" href="https://httpwg.org/specs/rfc7234.html#header.cache-control">Cache-Control</a>å­—æ®µï¼ˆ<a target="_blank" rel="noopener" href="https://httpwg.org/specs/rfc7234.html#cache-response-directive.max-age" title="max-age">ç¬¬5.2.2.8èŠ‚</a>ï¼‰ï¼Œæ¥æ”¶è€…<em>å¿…é¡»</em>å¿½ç•¥ Expires å­—æ®µã€‚åŒæ ·ï¼Œå¦‚æœä¸€ä¸ªå“åº”åŒ…æ‹¬ s-maxage æŒ‡ä»¤ï¼ˆ<a target="_blank" rel="noopener" href="https://httpwg.org/specs/rfc7234.html#cache-response-directive.s-maxage" title="s-maxage">ç¬¬5.2.2.9èŠ‚</a>ï¼‰ï¼Œå…±äº«ç¼“å­˜æ¥æ”¶è€…<em>å¿…é¡»</em>å¿½ç•¥ Expires å­—æ®µã€‚åœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼ŒExpires ä¸­çš„å€¼åªé’ˆå¯¹è¿˜æ²¡æœ‰å®ç° Cache-Control å­—æ®µçš„æ¥æ”¶è€…ã€‚</p>
</blockquote>
<p><strong>è§„èŒƒç»“è®ºï¼šå¦‚æœåŒæ—¶å­˜åœ¨ï¼Œé‚£ä¹ˆä»¥ <code>max-age</code> ä¸ºå‡†ã€‚</strong></p>
<p>ä¸‹é¢ï¼Œæˆ‘ä»¬åŒæ—¶è®¾ç½®è¿™ä¸¤ä¸ªå¤´ï¼š</p>
<pre class="language-typescript" data-language="typescript"><code class="language-typescript">app<span class="token punctuation">.</span><span class="token function">useStaticAssets</span><span class="token punctuation">(</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'..'</span><span class="token punctuation">,</span> <span class="token string">'public'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>
  <span class="token function-variable function">setHeaders</span><span class="token operator">:</span> <span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
    res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span>
      <span class="token string">'Expires'</span><span class="token punctuation">,</span>
      <span class="token function">dayjs</span><span class="token punctuation">(</span><span class="token string">'2022-08-20 13:00:15'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">,</span> <span class="token string">'seconds'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
    res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Cache-Control'</span><span class="token punctuation">,</span> <span class="token string">'public,max-age=0'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Date'</span><span class="token punctuation">,</span> <span class="token function">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  lastModified<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  etag<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>

<p>æ¥ç€çœ‹åŠ¨ç”»ï¼š</p>
<p><img src="https://to-out-use.oss-cn-hangzhou.aliyuncs.com/common/Kapture%202022-08-19%20at%2020.48.32.gif" alt="Kapture 2022-08-19 at 20.48.32.gif" loading="lazy"></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œæ¯æ¬¡è¯·æ±‚éƒ½æ˜¯åŸå§‹çš„ <code>4.8m</code>ã€‚å°æç¤ºï¼š<code>max-age=0</code> ç­‰åŒäº <code>no-cache</code>ã€‚</p>
<p><strong>å° Tipï¼šæ¯æ¬¡è¯·æ±‚å¦‚ä½•è¦æ±‚æµè§ˆå™¨ä¸æ‹¿å†…å­˜å‘¢ï¼Ÿå‰ææ˜¯ä¸ä½¿ç”¨ <code>Response Header</code> åšæ–‡ç« </strong></p>
<ul>
<li><ol>
<li>åœ¨ <code>Dev Tools</code> é‡Œå¼€å¯ <code>Disable cache</code></li>
</ol>
<p>  <img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6dfc4a3d0b7c4012b44da7975ff69468~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy"></p>
</li>
<li><ol start="2">
<li>å€ŸåŠ© <code>Chrome</code> æ’ä»¶ï¼Œ <code>Requesty</code> æ¥è¿›è¡Œæ‰‹åŠ¨è®¾ç½®</li>
</ol>
</li>
</ul>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ceda93029f9140a9b3519ad6cf8ef53c~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy"></p>
<p>è¿™é‡Œå¯ä»¥å†æä¸€ä¸ªæ¦‚å¿µï¼šé‡æ–°åŠ è½½å’Œå¼ºåˆ¶é‡æ–°åŠ è½½ï¼Œè§<a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Caching#reload_and_force_reload">MDN</a></p>
<p>é‡æ–°åŠ è½½çš„å®ç°æ–¹å¼ï¼šæ® <code>MDN</code> æè¿°ï¼š</p>
<blockquote>
<p>For recovering from window corruption or updating to the latest version of the resource, browsers provide a reload function for users.</p>
</blockquote>
<blockquote>
<p>That behavior is also defined in theÂ <a target="_blank" rel="noopener" href="https://fetch.spec.whatwg.org/#http-network-or-cache-fetch">Fetch</a>Â standard and can be reproduced in JavaScript by callingÂ <code>fetch()</code>Â with the cache mode set toÂ <code>no-cache</code>Â (note thatÂ <code>reload</code>Â is not the right mode for this case):</p>
</blockquote>
<p>ä¸Šæ–‡å€ŸåŠ© <code>chrome</code> æ’ä»¶å°±æ˜¯ç”¨äº†åè€…å»å®ç°é‡æ–°åŠ è½½çš„ã€‚</p>
<p>å¼ºåˆ¶é‡æ–°åŠ è½½çš„å®ç°æ–¹å¼ï¼š</p>
<ul>
<li><p>å¼€å¯ <code>Disable cache</code></p>
</li>
<li><p>åœ¨æµè§ˆå™¨ä¸­æ“ä½œ</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1ba7298219994c6e887c70f5453127b6~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy"></p>
</li>
</ul>
<hr>
<p>æ¥ç€ä¸Šé¢çš„å†…å®¹ï¼Œæˆ‘ä»¬æ¥ç»§ç»­æ‰©å±•è®²è®²å‰©ä¸‹çš„å‡ ä¸ªå€¼ï¼Œåº”ç”¨åˆ° <code>Cache-Control</code> ä¸Šæœ‰ä»€ä¹ˆæ•ˆæœã€‚è¿™é‡Œåªåˆ—ä¸¾å¸¸ç”¨çš„ã€‚</p>
<ul>
<li><p><code>private</code> &#x2F; <code>public</code></p>
<ul>
<li><code>private</code> ä»£è¡¨ç§æœ‰ç¼“å­˜ï¼Œä¾‹å¦‚è¿‘ç”¨æˆ·æµè§ˆå™¨æœ¬åœ°ç¼“å­˜ç­‰ï¼›</li>
<li><code>public</code> ä»£è¡¨å…±äº«ç¼“å­˜ï¼›<br><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0bc7a964ea93455b9e313fbdd27fa6f9~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy"><br>â€”- æ¥è‡ª<a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/3492319/private-vs-public-in-cache-control">Stackoverflow</a></li>
</ul>
</li>
<li><p><code>no-cache</code></p>
<ul>
<li>è¦æ±‚ç¼“å­˜é‡æ–°éªŒè¯ä¸æºæœåŠ¡å™¨çš„æ¯ä¸ªè¯·æ±‚ã€‚</li>
</ul>
</li>
<li><p><code>no-store</code></p>
<ul>
<li>ç¦æ­¢ç¼“å­˜</li>
</ul>
</li>
</ul>
<p>åˆ°è¿™é‡Œï¼Œå¼ºç¼“å­˜å°±ç»“æŸäº†ã€‚</p>
<p>é‚£ä¹ˆæ€è€ƒä¸€ä¸ªé—®é¢˜ï¼Œç¼“å­˜å¤±æ•ˆäº†ï¼Œå®ƒè¿˜èƒ½ç”¨å—ï¼Ÿæˆ‘æƒ³â€œç»­å‘½â€å†ç”¨æ€ä¹ˆåŠï¼Ÿè·ŸæœåŠ¡ç«¯ <code>token</code> ç»­å‘½ç›¸ä»¿ã€‚å¸¦ç€è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¼€å§‹åå•†ç¼“å­˜çš„ä»‹ç»ã€‚</p>
<hr>
<p>åŒæ ·çš„å½¢å¼ï¼Œè·Ÿä¸Šæ–‡ä¸€æ ·ï¼Œæˆ‘ä»¬å¼€å§‹ä» <code>http 1.0</code> çš„æ ‡å‡†åˆ° <code>http 1.1</code>ã€‚</p>
<p><strong><code>Last-Modified</code> &amp; <code>If-Modified-Since</code></strong></p>
<pre class="language-bash" data-language="bash"><code class="language-bash">Last-Modified: <span class="token number">2022</span>-08-19 <span class="token number">22</span>:00:00
Cache-Control: max-age<span class="token operator">=</span><span class="token number">20</span></code></pre>

<p>å½“è¯·æ±‚èµ„æºåï¼Œæµè§ˆå™¨æ”¶åˆ°è¿™ä¸ªç›¸åº”å¤´åå¼€å§‹ç¼“å­˜ï¼Œå¹¶ä¸”æ ‡æ³¨â€œè¿™ä¸ªèµ„æºâ€æœ€åæ›´æ”¹çš„æ—¶é—´æ˜¯ï¼š<code>2022-08-19 22:00:00</code>ï¼Œå¹¶ä¸”åœ¨ <code>20</code> ç§’åè¿‡æœŸã€‚</p>
<p>ç­‰è¿™ <code>20s</code>è¿‡æœŸåï¼Œæµè§ˆå™¨å¸¦ç€å®¢æˆ·ç«¯çš„ <code>If-Modified-Since</code> å¤´è¯´ï¼šè€å¼Ÿï¼Œæˆ‘å¸®ä½ é—®é—®ï¼ŒæœåŠ¡å™¨çš„èµ„æºæœ‰æ²¡æœ‰å˜æ›´è¿‡ï¼Œé—®å®Œä¹‹åï¼Œå‘ç°å°±æ²¡å˜è¿‡ï¼Œè¿”å› <code>304</code>ï¼Œç»§ç»­ä»ç¼“å­˜é‡Œæ‹¿ã€‚</p>
<p>å¦‚æœæ˜¯æ–°çš„ï¼Œé‚£ä¹ˆå°±æ‰§è¡Œä¸‹ç±»ä¼¼ <code>no-cache</code> çš„æ“ä½œï¼Œç»™åˆ°å®¢æˆ·ç«¯æœ€æ–°çš„èµ„æºã€‚</p>
<p>æˆ‘ä»¬å¼€å§‹æ“ä½œé™æ€èµ„æºæœåŠ¡å™¨çš„è®¾ç½®ï¼š</p>
<pre class="language-typescript" data-language="typescript"><code class="language-typescript">app<span class="token punctuation">.</span><span class="token function">useStaticAssets</span><span class="token punctuation">(</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'..'</span><span class="token punctuation">,</span> <span class="token string">'public'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>
  <span class="token function-variable function">setHeaders</span><span class="token operator">:</span> <span class="token punctuation">(</span>res<span class="token punctuation">,</span> path<span class="token punctuation">,</span> stat<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// res.setHeader(</span>
    <span class="token comment">//   'Expires',</span>
    <span class="token comment">//   dayjs('2022-08-20 13:00:15').add(15, 'seconds').toDate(),</span>
    <span class="token comment">// );</span>
    <span class="token comment">// res.setHeader('Cache-Control', 'private');</span>
    res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Last-Modified'</span><span class="token punctuation">,</span> <span class="token function">dayjs</span><span class="token punctuation">(</span><span class="token string">'2022-08-19 19:38:15'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Date'</span><span class="token punctuation">,</span> <span class="token function">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token comment">// lastModified: false,</span>
  etag<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  redirect<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  index<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  maxAge<span class="token operator">:</span> <span class="token number">2000</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>

<p><code>nest</code> ä¸­ <code>max-age</code> æ˜¯ä»¥ <code>ms</code> ä¸ºå•ä½çš„ï¼Œä¹Ÿå°±æ˜¯åœ¨ <code>2s</code> åè¿›è¡Œå¯¹æ¯”ï¼š<code>Last-Modified</code> &amp; <code>If-Modified-Since</code>ã€‚</p>
<p>å¼€å§‹çœ‹åŠ¨ç”»ï¼š</p>
<p><img src="https://to-out-use.oss-cn-hangzhou.aliyuncs.com/common/Kapture%202022-08-19%20at%2020.55.52.gif" alt="Kapture 2022-08-19 at 20.55.52.gif" loading="lazy"></p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ec042328f299435abafd1a2ca0d163bf~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy"></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œç¬¬ä¸€æ¬¡è¯·æ±‚æ˜¯ <code>4.8MB</code>, ç¬¬äºŒæ¬¡æ˜¯ <code>290B</code>ï¼ˆå› ä¸º <code>2</code> ç§’å¾ˆå¿«ï¼Œæ‰€ä»¥å·²ç»è¿‡äº†ç¼“å­˜ï¼Œå¹¶ä¸”æ¯”å¯¹å®Œäº†ï¼Œæ­¤æ—¶çš„ <code>200</code> ç­‰åŒäº <code>304</code> æ•ˆæœï¼‰ï¼Œå¯ä»¥ä»”ç»†è§‚å¯Ÿä¸‹ç¬¬5æ¬¡ï¼Œæ°å¥½å‘½ä¸­äº†ç¼“å­˜ï¼Œæ‰€ä»¥æ˜¯ <code>disk cache</code>ã€‚</p>
<p><strong><code>Etag</code> &amp; <code>If-None-Match</code></strong></p>
<p>ç»†å¿ƒçš„åŒå­¦å¯èƒ½å·²ç»å‘ç°ä¸ªé—®é¢˜ï¼Œæ ¹æ®ä¿®æ”¹æ—¶é—´å»åšå¯¹æ¯”å¾ˆå®¹æ˜“æ¼æ‰ä¸€ç§åœºæ™¯ï¼š<code>å°±æ˜¯æ‰“å¼€äº†æ–‡ä»¶åˆä¿å­˜äº†ä¸€ä¸‹ï¼Œæ²¡åšä»»ä½•å˜æ›´ï¼Œä½†æ˜¯æ­¤æ—¶ï¼Œè®¡ç®—æœºå·²ç»ç»™æ–‡ä»¶æ‰“ä¸Šäº†æœ€æ–°çš„æ—¶é—´</code>ã€‚</p>
<p>è¿™ä¸ªæ—¶å€™ï¼Œåé¢çš„è¿™ä¸€å¯¹å¤´å°±æ´¾ä¸Šç”¨åœºäº†ã€‚</p>
<hr>
<p>æ‰€è°“ï¼šâ€œå¹´å¹´å²å²èŠ±ç›¸ä¼¼ï¼Œå²å²å¹´å¹´äººä¸åŒâ€ã€‚æœ¬è´¨æ¥è®²è¿™å²å²å¹´å¹´å…¶å®è¿˜æ˜¯è¿™ä¸ªäººï¼Œä½†æ˜¯èŠ±å¯å°±ä¸æ˜¯äº†ï¼Œæ—¶é—´ä¹Ÿä¸æ˜¯ã€‚</p>
<p>åŒç†ï¼Œ<code>Etag</code> æ˜¯æ ¹æ®å†…å®¹äº§ç”Ÿçš„ <code>hash</code> ï¼Œè·Ÿä¸€ä¸ªäººçš„<code>åŸºå› åºåˆ—</code>ä¸€æ ·ï¼Œé™¤é<code>åŸºå› åºåˆ—</code>å˜äº†ï¼Œé‚£è¿™ä¸ªäººå°±å˜äº†ï¼Œè‡³äºå˜æˆå•¥æ ·å­ï¼Œå’±ä¹Ÿä¸çŸ¥é“ã€‚æ‰€ä»¥å†…å®¹å˜äº†ï¼Œ<code>Etag</code> ä¹Ÿå°±å˜äº†ã€‚</p>
<p>è·Ÿä¸Šé¢çš„æ ‡ç­¾å¯¹æ˜¯ä¸€æ ·çš„ï¼Œç¼“å­˜å‰ï¼Œæœ¬åœ°è®°ä¸‹åŸå§‹çš„ <code>Etag</code>ï¼Œç­‰åˆ°ç¼“å­˜è¿‡æœŸåï¼ŒæŠŠåŸå§‹çš„ <code>Etag</code> èµ‹ç»™ <code>Request</code> çš„ <code>If-None-Match</code> å¤´ã€‚å¸¦ç€è¿™ä¸ªå¤´ï¼Œå»æœåŠ¡ç«¯å¯¹æ¯”ã€‚</p>
<p>é™æ€æœåŠ¡å™¨ä»£ç ï¼š</p>
<pre class="language-typescript" data-language="typescript"><code class="language-typescript">app<span class="token punctuation">.</span><span class="token function">useStaticAssets</span><span class="token punctuation">(</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'..'</span><span class="token punctuation">,</span> <span class="token string">'public'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>
  <span class="token function-variable function">setHeaders</span><span class="token operator">:</span> <span class="token punctuation">(</span>res<span class="token punctuation">,</span> path<span class="token punctuation">,</span> stat<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// res.setHeader(</span>
    <span class="token comment">//   'Expires',</span>
    <span class="token comment">//   dayjs('2022-08-20 13:00:15').add(15, 'seconds').toDate(),</span>
    <span class="token comment">// );</span>
    <span class="token comment">// res.setHeader('Cache-Control', 'private');</span>
    <span class="token comment">// res.setHeader('Last-Modified', dayjs('2022-08-19 19:38:15').toDate());</span>
    res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Date'</span><span class="token punctuation">,</span> <span class="token function">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  lastModified<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token comment">// etag: false,</span>
  redirect<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  index<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  maxAge<span class="token operator">:</span> <span class="token number">2000</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>

<p>ç»§ç»­çœ‹åŠ¨ç”»ï¼š</p>
<p><img src="https://to-out-use.oss-cn-hangzhou.aliyuncs.com/common/Kapture%202022-08-19%20at%2021.17.10.gif" alt="Kapture 2022-08-19 at 21.17.10.gif" loading="lazy"></p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/94243716906e447e939142cbce763572~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy"></p>
<p>è¿˜æ˜¯è€å¯¹è¯äº†ï¼Œå®¢æˆ·ç«¯ç¼“å­˜è¿‡æœŸäº†ï¼Œæµè§ˆå™¨å¸¦ç€åŸå§‹ <code>Etag</code> (<code>If-None-Match</code>)å»è¯·æ±‚æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨å‘ç° <code>Etag</code> æ²¡å˜è¿‡ï¼Œè¯´ï¼šâ€œæµè§ˆå™¨ï¼Œä½ å¯ä»¥ç»§ç»­ç”¨åŸæ¥çš„ç¼“å­˜â€ï¼Œäºæ˜¯ï¼Œå®¢æˆ·ç«¯æ­¤æ—¶æ‹¿åˆ°çš„èµ„æºè¿˜æ˜¯åŸæ¥ç¼“å­˜é‡Œçš„ã€‚</p>
<h3 id="Resultï¼ˆç»“è®ºï¼‰"><a href="#Resultï¼ˆç»“è®ºï¼‰" class="headerlink" title="Resultï¼ˆç»“è®ºï¼‰"></a>Resultï¼ˆç»“è®ºï¼‰</h3><h4 id="HTTP-ç¼“å­˜ä½“ç³»"><a href="#HTTP-ç¼“å­˜ä½“ç³»" class="headerlink" title="HTTP ç¼“å­˜ä½“ç³»"></a>HTTP ç¼“å­˜ä½“ç³»</h4><p><strong>éƒ½çœ‹åˆ°è¿™é‡Œäº†ï¼Œå‰©ä¸‹çš„æ€»ç»“å°±äº¤ç»™è¯»è€…å§ï¼Œè¿™é‡Œåªåˆ—ä¸¾å¤§çº²ï¼Œå®é™…è¯¦ç»†çš„å†…å®¹ä¸Šæ–‡å·²ç»æœ‰äº†ã€‚</strong></p>
<ul>
<li>å­˜å‚¨ç­–ç•¥</li>
<li>è¿‡æœŸç­–ç•¥</li>
<li>å¯¹æ¯”ç­–ç•¥</li>
</ul>
<h4 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h4><ul>
<li><a target="_blank" rel="noopener" href="https://httpwg.org/specs/rfc7234.html#validation.received">Http è§„èŒƒ</a></li>
<li><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/qOMO0LIdA47j3RjhbCWUEQ">å½»åº•å¼„æ‡‚ Http ç¼“å­˜æœºåˆ¶ - åŸºäºç¼“å­˜ç­–ç•¥ä¸‰è¦ç´ åˆ†è§£æ³•</a></li>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Cache-Control">MDN</a></li>
</ul>
<hr>
<p>æœ€åï¼Œæœ¬æ¬¡æ–‡ç« çš„å†…å®¹åˆ°è¿™é‡Œå°±å…¨éƒ¨ç»“æŸäº†ï¼Œæˆ‘æ˜¯<code>ä¸æ¢</code>ï¼Œæµªå­å›å¤´é‡‘ä¸æ¢çš„é‚£ä¸ªä¸æ¢å“Ÿï½ï¼Œå¦‚æœæœ¬æ–‡å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼Œå¯ä»¥å¸®å¿™ç‚¹ä¸ªå°èµï¼Œå¦‚æœæœ‰ä¸å¯¹çš„åœ°æ–¹ï¼Œå¯ä»¥è¯„è®ºå¸®æˆ‘æ–§æ­£ã€‚</p>
</div></section><div id="reward-container"><span class="hty-icon-button button-glow" id="reward-button" title="æ‰“èµ" onclick="var qr = document.getElementById(&quot;qr&quot;); qr.style.display = (qr.style.display === &quot;none&quot;) ? &quot;block&quot; : &quot;none&quot;;"><span class="icon iconify" data-icon="ri:hand-coin-line"></span></span><div id="reward-comment">I'm so cute. Please give me money.</div><div id="qr" style="display:none;"><div style="display:inline-block"><a target="_blank" rel="noopener" href="https://bigdreamerblog.oss-cn-beijing.aliyuncs.com/dev-blog/reward/WechatIMG27808.jpeg"><img loading="lazy" src="https://bigdreamerblog.oss-cn-beijing.aliyuncs.com/dev-blog/reward/WechatIMG27808.jpeg" alt="æ”¯ä»˜å®" title="æ”¯ä»˜å®"></a><div><span style="color:#00A3EE"><span class="icon iconify" data-icon="ri:alipay-line"></span></span></div></div></div></div><ul class="post-copyright"><li class="post-copyright-author"><strong>æœ¬æ–‡ä½œè€…ï¼š</strong>ä¸æ¢</li><li class="post-copyright-link"><strong>æœ¬æ–‡é“¾æ¥ï¼š</strong><a href="https://dev.bigdreamer.cc/review-http-cache/" title="é‡æ¸© HTTP ç¼“å­˜">https://dev.bigdreamer.cc/review-http-cache/</a></li><li class="post-copyright-license"><strong>ç‰ˆæƒå£°æ˜ï¼š</strong>æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é»˜è®¤é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener" title="CC BY-NC-SA 4.0 "><span class="icon iconify" data-icon="ri:creative-commons-line"></span><span class="icon iconify" data-icon="ri:creative-commons-by-line"></span><span class="icon iconify" data-icon="ri:creative-commons-nc-line"></span><span class="icon iconify" data-icon="ri:creative-commons-sa-line"></span></a> è®¸å¯åè®®ã€‚</li></ul><script>document.addEventListener('copy', function (event) {
  const clipboardData = event.clipboardData || window.clipboardData;
  if (!clipboardData) { return; }
  const text = window.getSelection().toString();
  if (text) {
    event.preventDefault();
    clipboardData.setData('text/plain', text + '\n\næœ¬æ–‡ä½œè€…ï¼šä¸æ¢\næœ¬æ–‡é“¾æ¥ï¼šhttps://dev.bigdreamer.cc/review-http-cache/\nç‰ˆæƒå£°æ˜ï¼šæœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é»˜è®¤é‡‡ç”¨ CC BY-NC-SA 4.0 è®¸å¯åè®®ã€‚');
  }
});</script></article><div class="post-nav"><div class="post-nav-item"><a class="post-nav-prev" href="/mind/" rel="prev" title="æ”¹å˜"><span class="icon iconify" data-icon="ri:arrow-left-s-line"></span><span class="post-nav-text">æ”¹å˜</span></a></div><div class="post-nav-item"><a class="post-nav-next" href="/precision-react-demystified2-3/" rel="next" title="ç²¾è¯»ã€ŠReactæŠ€æœ¯æ­ç§˜ã€‹ä¸­ å·ä¸‰"><span class="post-nav-text">ç²¾è¯»ã€ŠReactæŠ€æœ¯æ­ç§˜ã€‹ä¸­ å·ä¸‰</span><span class="icon iconify" data-icon="ri:arrow-right-s-line"></span></a></div></div></div><div class="hty-card" id="comment"><div id="waline"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@waline/client@v2/dist/waline.css"><script>window.CONFIG.waline.config.path = "/review-http-cache/"</script><div class="js-Pjax"><script src="/js/comments/waline.js" type="module" defer></script></div></div></main><footer class="sidebar-translate" id="footer"><div class="copyright"><span>&copy; 2022 â€“ 2023 </span><span class="with-love" id="animate"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-cloud-line"></use></svg></span><span class="author"> ä¸æ¢</span></div><div class="live-time"><span>æœ¬åšå®¢å·²èŒèŒå“’åœ°è¿è¡Œ</span><span id="display_live_time"></span><span class="moe-text">(â—'â—¡'â—)</span><script>function blog_live_time() {
  setTimeout(blog_live_time, 1000);
  const start = new Date('2022-04-10T00:00:00');
  const now = new Date();
  const timeDiff = (now.getTime() - start.getTime());
  const msPerMinute = 60 * 1000;
  const msPerHour = 60 * msPerMinute;
  const msPerDay = 24 * msPerHour;
  const passDay = Math.floor(timeDiff / msPerDay);
  const passHour = Math.floor((timeDiff % msPerDay) / 60 / 60 / 1000);
  const passMinute = Math.floor((timeDiff % msPerHour) / 60 / 1000);
  const passSecond = Math.floor((timeDiff % msPerMinute) / 1000);
  display_live_time.innerHTML = ` ${passDay} å¤© ${passHour} å°æ—¶ ${passMinute} åˆ† ${passSecond} ç§’`;
}
blog_live_time();
</script></div></footer></div><a class="hty-icon-button" id="back-to-top" aria-label="back-to-top" href="#"><span class="icon iconify" data-icon="ri:arrow-up-s-line"></span><svg class="progress-circle-container" viewBox="0 0 100 100"><circle class="progress-circle" id="progressCircle" cx="50" cy="50" r="48" fill="none" stroke="#597ef7" stroke-width="2" stroke-linecap="round"></circle></svg></a><a class="popup-trigger hty-icon-button icon-search" id="search" href="javascript:;" title="æœç´¢"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:search-line"></span></span></a><script>window.addEventListener("DOMContentLoaded", () => {
  // Handle and trigger popup window
  document.querySelector(".popup-trigger").addEventListener("click", () => {
    document.querySelector(".popup").classList.add("show");
    setTimeout(() => {
      document.querySelector(".search-input").focus();
    }, 100);
  });

  // Monitor main search box
  const onPopupClose = () => {
    document.querySelector(".popup").classList.remove("show");
  };

  document.querySelector(".popup-btn-close").addEventListener("click", () => {
    onPopupClose();
  });

  window.addEventListener("keyup", event => {
    if (event.key === "Escape") {
      onPopupClose();
    }
  });
});
</script><script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js"></script><script src="/js/search/local-search.js" defer type="module"></script><div class="popup search-popup"><div class="search-header"><span class="popup-btn-close close-icon hty-icon-button"><span class="icon iconify" data-icon="ri:close-line"></span></span></div><div class="search-input-container"><input class="search-input" id="local-search-input" type="text" placeholder="æœç´¢..." value=""></div><div class="search-result-container"></div></div><div class="aplayer no-destroy" id="aplayer" data-id="308168565" data-server="netease" data-type="playlist" data-fixed="true" data-autoplay data-theme="#597ef7" data-loop="all" data-order="list" data-preload="auto" data-volume="0.7" data-mutex data-lrctype="0" data-listmaxheight="340px" data-storagename="metingjs"></div><script src="https://cdn.jsdelivr.net/npm/live2d-widget@^3.1.3/lib/L2Dwidget.min.js"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"https://cdn.jsdelivr.net/npm/live2d-widget-model-wanko@1.0.5/assets/wanko.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true},"react":null,"log":false});</script></body></html>